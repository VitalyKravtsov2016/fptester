################################################
#
# Запрос данных
#
#   Код команды:	02h. Длина сообщения: 5 байт.
#   Пароль сервисной организации1 или системного администратора1, если пароль сервисной организации не был установлен (4 байта)
#
# Ответ: 		02h. Длина сообщения: 37 или 253 байт.
#   Код ошибки (1 байт)
#   Код устройства в команде запроса дампа (1 байт)
#   Номер блока данных (2 байта)
#   Блок данных (32 или 248 байт)
#
################################################
#
#  Команда подается в состояниях:
#  1, Выдача данных
#
#  После команды ФР остается в состоянии
#  1, Выдача данных
#
################################################

name: "Команда 02h"
description: "Запрос данных"

tests:
  - name: "Корректный код устройства 6"
    testtype: command
    command: "02 00 00 00 00"
    response: "02 00"
    ecrmode_before: 1
    ecrmode_after: 1
    
  - name: "Команда не поддерживается в состоянии 4, Закрытая смена"
    testtype: command
    command: "02 00 00 00 00"
    ecrmode_before: 4
    ecrmode_after: 1
    resultcode: 115
    
  - name: "Команда не поддерживается в состоянии 8, Открытый чек"
    testtype: command
    command: "02 00 00 00 00"
    ecrmode_before: 8
    ecrmode_after: 1
    resultcode: 115
    
  - name: "Команда не поддерживается в состоянии 10, Тестовый прогон"
    testtype: command
    command: "02 00 00 00 00"
    ecrmode_before: 10
    ecrmode_after: 1
    resultcode: 115
   
  - name: "Неверная длина команды 1"
    testtype: command
    command: "02"
    resultcode: 126

  - name: "Неверная длина команды 2"
    testtype: command
    command: "02 1E"
    resultcode: 126
   
  - name: "Неверная длина команды 3"
    testtype: command
    command: "02 00 00 00 00 FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF"
    resultcode: 126
    
  - name: "Неверный пароль"
    testtype: command
    command: "02 FF FF FF FF"
    resultcode: 79
